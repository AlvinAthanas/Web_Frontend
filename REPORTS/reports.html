<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reports</title>

    <!-- Montserrat Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />

    <!-- External CSS -->
    <link rel="stylesheet" href="../GENERAL/style.css" />
    <link rel="stylesheet" href="../REPORTS/reports.css" />
  </head>

  <body>
    <div class="grid-container" id="containerId">
      <main class="main-container">
        <div class="table-title">
          <h2>Downloaded Reports</h2>
        </div>
        
        <table class="table">
          <thead>
            <tr>
              <th>Filename</th>
              <th>Type</th>
              <th>Date Downloaded</th>
            </tr>
          </thead>
          <tbody id="reports-table-body">
            <!-- Reports will be loaded here -->
          </tbody>
        </table>
        
      </main>
    </div>

    <!-- Scripts -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const reports = JSON.parse(localStorage.getItem("reports") || "[]");
        const tableBody = document.getElementById("reports-table-body");
    
        if (reports.length === 0) {
          tableBody.innerHTML = "<tr><td colspan='3'>No reports downloaded yet.</td></tr>";
        } else {
          reports.forEach((report) => {
            const row = document.createElement("tr");
    
            // Creating download link (if the file exists in user's downloads folder)
            row.innerHTML = `
              <td><a href="../downloads/${report.filename}" target="_blank" class="report-link">${report.filename}</a></td>
              <td>${report.type}</td>
              <td>${report.date}</td>
            `;
            tableBody.appendChild(row);
          });
        }
      });
    </script>
    
    

    <script src="../GENERAL/script.js"></script>
  </body>
</html>

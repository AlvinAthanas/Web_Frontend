<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <!-- Montserrat Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />

<style>
    /* Add this to the style section in General.html */
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .header-center {
        flex-grow: 1;
        text-align: center;
    }
    
    #parishNameHeader {
        margin: 0;
        font-size: 1.2rem;
        color: #4a6baf;
        font-weight: 600;
    }
</style>  </head>
  <body>
    <!-- <div class="grid-container"> -->
    <!-- Header -->
    <header class="header">
      <div class="menu-icon" onclick="openSidebar()">
        <span class="material-icons-outlined"> menu </span>
      </div>
      <div class="header-left">
        <span class="material-icons-outlined"> search </span>
      </div>
         <div class="header-center">
        <h2 id="parishNameHeader">PAROKIA YA <span id="parishName"></span></h2>
    </div>
      <div class="header-right">
        <span class="material-icons-outlined"> notifications </span>
        <span class="material-icons-outlined"> mail </span>
        <div class="account-container">
          <span class="material-icons-outlined"> account_circle </span>
          <div class="account-dropdown">
            <a href="../PROFILE/profile.html" class="dropdown-item">
              <span class="material-icons-outlined">person</span>
              Profile
            </a>
            <div class="dropdown-divider"></div>
            <a href="../index.html" class="dropdown-item">
              <span class="material-icons-outlined">logout</span>
              Logout
            </a>
          </div>
        </div>
      </div>
    </header>
    <!-- End Header -->

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
      <div class="sidebar-title">
        <div class="sidebar-brand">
          <span class="material-icons-outlined"></span> MENU
        </div>
        <span class="material-icons-outlined" onclick="closeSidebar()"
          >close</span
        >
      </div>
      <ul class="sidebar-list">
        <a href="../DASHBOARD/dashboard.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined">dashboard</span>
            Dashboard
          </li>
        </a>

        <a href="../ROLES/roles.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined">assignment_ind</span> Roles
          </li>
        </a>

        <a href="../MEMBERS/members.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined">people</span> Members
          </li>
        </a>

        <a href="../CONTRIBUTION/contribution.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined"> payments </span>
            Contribution
          </li>
        </a>

        <a href="../SCHEDULES/Schedules.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined">calendar_month</span>
            Schedule
          </li>
        </a>

        <a href="../EVENTS/Events.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined"> event </span>
            Events
          </li>
        </a>

        <a href="../COMMUNITY/Community.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined"> groups </span>
            Community
          </li>
        </a>

        <a href="../PROJECTS/projects.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined"> rowing </span>
            Projects
          </li>
        </a>

        <a href="../SACRAMENTS/sacraments.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined"> flare </span> Sacraments
          </li>
        </a>

        <a href="../REPORTS/reports.html">
          <li class="sidebar-list-item">
            <span class="material-icons-outlined"> library_books </span>
            Reports
          </li>
        </a>
       
        <!-- <li class="sidebar-list-item">
          <span class="material-icons-outlined"> settings </span> Settings
        </li> -->
      </ul>

      <!-- Bottom Content -->
      <div class="bottom-content">
        <a href="../index.html" class="logout">
          <span class="material-icons-outlined">logout</span>Logout
        </a>
        <!-- <li class="mode">
          <div class="moon-sun">
            <span class="material-icons-outlined moon">dark_mode</span>
            <span class="material-icons-outlined sun">light_mode</span>
          </div>
          <span class="mode-text text">Dark Mode</span>
          <div class="toogle-switch">
            <span class="switch"></span>
          </div>
        </li> -->
      </div>
      <!-- End Bottom Content -->
    </aside>
    <!-- End Sidebar -->

    <script>
      document.querySelectorAll('.logout').forEach(item => {
        item.addEventListener('click', function (event) {
          event.preventDefault();
          localStorage.removeItem('authToken'); // ✅ Remove JWT
          window.location.href = this.getAttribute('href'); // ✅ Redirect to login
        });
      });
    </script>

    <script>
      // Add this script to General.html
document.addEventListener('DOMContentLoaded', function() {
    // Get the parish name from localStorage if available
    const storedParishName = localStorage.getItem('parishName');
    if (storedParishName) {
        document.getElementById('parishName').textContent = storedParishName;
    } else {
        // If not in localStorage, fetch it from the API
        const token = localStorage.getItem('authToken');
        if (token) {
            // You would need to get the parish ID from the user data
            // For this example, we'll assume you have it stored or can get it
            fetch('http://localhost:8080/parish/1', { // Replace 1 with actual parish ID
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => {
                if (!response.ok) throw new Error('Failed to fetch parish data');
                return response.json();
            })
            .then(data => {
                const parishName = data.name;
                document.getElementById('parishName').textContent = parishName;
                localStorage.setItem('parishName', parishName);
            })
            .catch(error => {
                console.error('Error fetching parish data:', error);
                document.getElementById('parishName').textContent = 'Unknown Parish';
            });
        }
    }
});
    </script>
    
  </body>
</html>
